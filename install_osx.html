<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ISCE: Installing ISCE on OS X with Macports</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ISCE
   &#160;<span id="projectnumber">3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="sphinx/html/index.html"><span>Python&#160;classes</span></a></li>
      <li><a href="https://github-fn.jpl.nasa.gov/ericmg/isce/issues/"><span>Issue&#160;Tracker</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installing ISCE on OS X with Macports </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#osxpack">Installing packages using Macports</a></li>
<li class="level1"><a href="#pyre">Installing pyre from source</a><ul><li class="level2"><a href="#mm">Step 1: Fetch mm from github</a></li>
<li class="level2"><a href="#pyregit">Step 2: Fetch pyre from github and install it</a></li>
</ul>
</li>
<li class="level1"><a href="#isce3osx">Install ISCE3 from source</a><ul><li class="level2"><a href="#osxtargit">Step 1: Get latest version of ISCE source</a><ul><li class="level3"><a href="#osxgit">Option 1: Checkout latest version from git</a></li>
<li class="level3"><a href="#osxtar">Option 2: Get the latest tarball</a></li>
</ul>
</li>
<li class="level2"><a href="#osxbuild">Step 2: Build the software</a></li>
<li class="level2"><a href="#osxinstall">Step 3: Install and set environment variables</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>ISCE has the following dependencies </p>
<ol>
<li>
<a href="http://pyre.orthologue.com">pyre</a> </li>
<li>
C++ compiler - gcc-6 or above </li>
<li>
Python 3.6 or above </li>
<li>
Numpy and Cython </li>
<li>
GDAL 2.3 or above with Python bindings </li>
<li>
HDF5 1.10.2 or above with h5py </li>
<li>
cmake 3.11 or above </li>
<li>
CUDA 9.0 or above (for GPU-based processing) </li>
</ol>
<p>One can use any of the three package managers - Macports, Homebrew or Conda to install ISCE on OS X. We will only walk through the installation steps using Macports. It is highly recommend to not mix packages installed by different package managers as this typically leads to library incompatibility issues.</p>
<h1><a class="anchor" id="osxpack"></a>
Installing packages using Macports</h1>
<p>We write the instructions assuming that we are using gcc7 and python36. Changes these to appropriate version numbers for your installation.</p>
<ol>
<li>
sudo port install gcc7 <ul>
<li>
sudo port select gcc mp-gcc7 </li>
<li>
Restart terminal after this </li>
</ul>
</li>
<li>
sudo port install python36 <ul>
<li>
sudo port select python3 python36 </li>
<li>
sudo ln -s /opt/local/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m /opt/local/include/python3.6m </li>
<li>
The link command is to keep the paths simpler for use with installing software from source. </li>
</ul>
</li>
<li>
sudo port install cmake gawk coreutils gsed </li>
<li>
sudo port install wget +ssl </li>
<li>
sudo port install fftw-3 +gcc7 </li>
<li>
sudo port install fftw-3-single +gcc7 </li>
<li>
sudo port install hdf5 +gcc7 </li>
<li>
sudo port install py36-numpy +gcc7 </li>
<li>
sudo port install py36-scipy +gcc7 </li>
<li>
sudo port install py36-cython <ul>
<li>
sudo ln -s /opt/local/bin/cython-3.6 /opt/local/bin/cython3 </li>
<li>
The link reproduces the environment that we usually get on linux machines </li>
</ul>
</li>
<li>
sudo port install py36-h5py </li>
<li>
sudo port install proj </li>
<li>
sudo port install gdal +curl +expat +geos +hdf5 +openjpeg <ul>
<li>
export GDAL_DATA=/opt/local/share/gdal </li>
<li>
You may want to build a more complete version of GDAL with support for more formats. The recommended options list is : +hdf4 +hdf5 +netcdf +openjpeg +postgresql95 . Use gcc7 whenever the option is available to build those ports. </li>
</ul>
</li>
<li>
sudo port install py36-gdal </li>
</ol>
<h1><a class="anchor" id="pyre"></a>
Installing pyre from source</h1>
<p>In this set of instructions, we will install pyre from source using its custom build system - "mm". The directory structure that we assume for installing pyre is as follows: </p>
<table class="doxtable">
<caption id="pyre_dir" align="bottom">Directory structure for installing pyre</caption>
<tr>
<th>Folder</th><th>Description </th></tr>
<tr>
<td>/Users/username/tools/pyre/config</td><td>Directory containing mm </td></tr>
<tr>
<td>/Users/username/tools/pyre/src</td><td>Directory which will contain source for pyre </td></tr>
<tr>
<td>/Users/username/tools/pyre/build</td><td>Build directory for pyre </td></tr>
<tr>
<td>/Users/username/tools/pyre/install</td><td>Install directory for pyre </td></tr>
</table>
<h2><a class="anchor" id="mm"></a>
Step 1: Fetch mm from github</h2>
<ol>
<li>
<p class="startli">Ensure you are in the correct folder. Create the pyre folder if it doesn't exist. </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/pyre</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Clone the git repository for config </p>
<div class="fragment"><div class="line">&gt; git clone https:<span class="comment">//github.com/aivazis/config.git</span></div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Set up environment variables and aliases to use config </p>
<div class="fragment"><div class="line">export BLD_CONFIG=/Users/username/tools/pyre/config</div>
<div class="line">export EXPORT_ROOT=/Users/username/tools/pyre/install</div>
<div class="line">alias mm=<span class="stringliteral">&quot;python3 /Users/username/tools/pyre/config/make/mm.py&quot;</span></div>
<div class="line">alias <span class="stringliteral">&quot;mm.paths&quot;</span>=<span class="stringliteral">&quot;python3 /Users/username/tools/pyre/config/make/mm.py --quiet --paths=sh $*&quot;</span></div>
<div class="line">alias <span class="stringliteral">&quot;mm.env&quot;</span>=<span class="stringliteral">&quot;mm --env=sh&quot;</span></div>
<div class="line">alias <span class="stringliteral">&quot;mm.show&quot;</span>=<span class="stringliteral">&quot;mm --show --dry&quot;</span></div>
<div class="line">alias <span class="stringliteral">&quot;mm.bldroot&quot;</span>=<span class="stringliteral">&quot;mm --dry --quiet --show=$BLD_ROOT&quot;</span></div>
<div class="line">export PATH=$PATH:/Users/username/tools/pyre/install/bin</div>
<div class="line">export PYTHONPATH=$PYTHONPATH:/Users/username/tools/pyre/install/packages</div>
<div class="line">export LD_LIBRARY_PATH=$LD_LIBRARYPATH:/Users/username/tools/pyre/install/lib</div>
<div class="line">export MM_INCLUDES=/Users/username/tools/pyre/install/include</div>
<div class="line">export MM_LIBPATH=/Users/username/tools/pyre/install/lib</div>
</div><!-- fragment --><p class="endli"></p>
</li>
</ol>
<h2><a class="anchor" id="pyregit"></a>
Step 2: Fetch pyre from github and install it</h2>
<ol>
<li>
<p class="startli">Ensure you are in the correct folder. </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/pyre/src</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Clone the git repository for pyre. </p>
<div class="fragment"><div class="line">&gt; git clone https:<span class="comment">//github.com/pyre/pyre</span></div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Set up config parameters for pyre. This is done by adding a file named "config.def" in the /Users/username/tools/pyre/src/pyre/.mm/ </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/pyre/src/pyre/.mm</div>
<div class="line">&gt; cat config.def</div>
<div class="line"> PYTHON = python3.6m</div>
<div class="line"> PYTHON_DIR = /opt/local/Library/Frameworks/Python.framework/Versions/3.6</div>
<div class="line"> PYTHON_INCDIR = /opt/local/Library/Frameworks/Python.framework/Versions/3.6/include/python3.6m</div>
<div class="line"> PYTHON_LIB = python3.6m</div>
<div class="line"> PYTHON_LIBDIR = /opt/local/Library/Frameworks/Python.framework/Versions/3.6/lib</div>
<div class="line"> PYTHON_PYCFLAGS = -b</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Install pyre </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/pyre/src/pyre</div>
<div class="line">&gt; mm</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Since we will use cmake for the next step, you can unset the variables and aliases used by mm at this stage if needed.</p>
<p class="endli"></p>
</li>
</ol>
<h1><a class="anchor" id="isce3osx"></a>
Install ISCE3 from source</h1>
<p>In this section we will walk through the directory setup and build system instructions for installing ISCE. ISCE can be built with 2 different build systems - <a href="https://github.com/aivazis/config">mm</a> and <a href="https://cmake.org/">cmake</a>. In this set of instructions, we focus on cmake as it is already available via standard package managers. We assume the following directory structure in this tutorial</p>
<table class="doxtable">
<caption id="isce_dir" align="bottom">Assumed directory structure for installing ISCE</caption>
<tr>
<th>Location</th><th>Description </th></tr>
<tr>
<td>/Users/username/tools/pyre/install </td><td>Pyre install location </td></tr>
<tr>
<td>/Users/username/tools/isce/src </td><td>git checkout location/ unpacked tarball location of ISCE source </td></tr>
<tr>
<td>/Users/username/tools/isce/build </td><td>cmake build location </td></tr>
<tr>
<td>/Users/username/tools/isce/install </td><td>cmake install location </td></tr>
</table>
<h2><a class="anchor" id="osxtargit"></a>
Step 1: Get latest version of ISCE source</h2>
<h3><a class="anchor" id="osxgit"></a>
Option 1: Checkout latest version from git</h3>
<ol>
<li>
Ensure that you are in the source folder <div class="fragment"><div class="line">&gt; cd /home/username/tools/isce/src</div>
</div><!-- fragment --> </li>
<li>
Check out the latest version of the source code from git <div class="fragment"><div class="line">&gt; git clone https:<span class="comment">//github-fn.jpl.nasa.gov/ericmg/isce</span></div>
</div><!-- fragment --> </li>
<li>
Ensure you are building the branch that you want to use. For example, if you want to build the <b>develop</b> branch <div class="fragment"><div class="line">&gt; git checkout develop</div>
</div><!-- fragment --> </li>
</ol>
<h3><a class="anchor" id="osxtar"></a>
Option 2: Get the latest tarball</h3>
<ol>
<li>
Ensure that you are in the source folder <div class="fragment"><div class="line">&gt; cd /home/username/tools/isce/src</div>
</div><!-- fragment --> </li>
<li>
Unpack the tarball. <div class="fragment"><div class="line">&gt; tar xjbf isce.tar.bz2</div>
</div><!-- fragment --> </li>
</ol>
<h2><a class="anchor" id="osxbuild"></a>
Step 2: Build the software</h2>
<ol>
<li>
<p class="startli">Ensure that you are in the build folder </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/isce/build</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Ensure that you have pyre related paths set in your environment variables. If not, do the following: </p>
<div class="fragment"><div class="line">export PYREDIR=/Users/username/tools/pyre/install</div>
<div class="line">export PATH=$PYREDIR/bin:$PATH</div>
<div class="line">export PYTHONPATH=$PYREDIR/packages:$PYTHONPATH</div>
<div class="line">export LD_LIBRARY_PATH=$PYREDIR/lib:$LD_LIBRARY_PATH</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Run cmake with the correct inputs </p>
<div class="fragment"><div class="line">&gt; CC=gcc CXX=g++ cmake -DCMAKE_INSTALL_PREFIX=/Users/username/tools/isce/install /Users/username/tools/isce/src/isce</div>
</div><!-- fragment --><p>Other optional arguments can be added to the cmake line </p>
<table class="doxtable">
<caption id="cmake_flags" align="bottom">Additional cmake options</caption>
<tr>
<th>Option</th><th>Description </th></tr>
<tr>
<td>-DWITH_DOC=ON </td><td>Build documentation from code using doxygen and sphinx. These need to be installed </td></tr>
<tr>
<td rowspan="3">-DMEMORY_CHECK_COMMAND=PATH_TO_VALGRIND_EXECUTABLE -DMEMORYCHECK_COMMAND_OPTIONS="--trace-children=yes --leak-check=full --dsymutil=yes --track-origins=yes" -DCMAKE_BUILD_TYPE=Debug</td><td></td></tr>
<tr>
<td>Run tests with "-T memcheck" to check for memory leaks. </td></tr>
<tr>
<td>valgrind needs to be installed. </td></tr>
</table>
<p class="endli"></p>
</li>
<li>
<p class="startli">Build the software </p>
<div class="fragment"><div class="line">&gt; make VERBOSE=ON</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
Run the unittests to ensure that software was built correctly <div class="fragment"><div class="line">&gt; ctest</div>
</div><!-- fragment --> </li>
</ol>
<h2><a class="anchor" id="osxinstall"></a>
Step 3: Install and set environment variables</h2>
<ol>
<li>
<p class="startli">Ensure that you are in the build folder </p>
<div class="fragment"><div class="line">&gt; cd /Users/username/tools/isce/build</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Install the software </p>
<div class="fragment"><div class="line">&gt; make install</div>
</div><!-- fragment --><p class="endli"></p>
</li>
<li>
<p class="startli">Setup the environment variables. Note that these need to be done in addition to the settings needed for pyre.</p>
<table class="doxtable">
<caption id="env_vars_osx" align="bottom">Environment variables to set after installing ISCE</caption>
<tr>
<th>Variable</th><th>Setting</th><th>Description </th></tr>
<tr>
<td>PATH</td><td>$PATH:/Users/username/tools/isce/install/bin</td><td>For executables installed by ISCE </td></tr>
<tr>
<td>PYTHONPATH</td><td>$PYTHONPATH:/Users/username/tools/isce/install/packages</td><td>ISCE python package </td></tr>
<tr>
<td>LD_LIBRARY_PATH</td><td>$LD_LIBRARY_PATH:/Users/username/tools/isce/install/lib</td><td>Shared libraries built by ISCE </td></tr>
</table>
<p class="endli"></p>
</li>
</ol>
</div></div><!-- contents -->
<hr>
Generated for ISCE3.0 by
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.8.5.
</body>
</html>
